<!DOCTYPE html>
<html class="no-js" lang="zxx">
<!-- Mirrored from htmldemo.net/floda/floda/shop.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 13 Aug 2025 01:29:25 GMT -->
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="meta description" />
    <title>Floda - Flower eCommerce Bootstrap 5 Template</title>

    <!--=== Favicon ===-->
    <link
      rel="shortcut icon"
      href="../../img/favicon.ico"
      type="image/x-icon"
    />

    <!-- Google fonts include -->
    <link
      href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,500,500i,700,900%7CYesteryear"
      rel="stylesheet"
    />

    <!-- All Vendor & plugins CSS include -->
    <link href="../../css/vendor.css" rel="stylesheet" />
    <!-- Main Style CSS -->
    <link href="../../css/style.css" rel="stylesheet" />
    <!-- Cart CSS for toast notifications -->
    <link href="../../css/cart.css" rel="stylesheet" />

    <!--[if lt IE 9]>
      <script src="//oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="//oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"
    />
  </head>

  <body>
    <!-- Start Header Area -->
    <header class="header-area">
      <!-- main header start -->
      <div class="main-header d-none d-lg-block">
        <!-- header middle area start -->
        <div class="header-main-area sticky">
          <div class="container">
            <div class="row align-items-center position-relative">
              <!-- start logo area -->
              <div class="col-lg-3">
                <div class="logo">
                  <a href="/html/common/homepage.html">
                    <img src="/images/logo/logo.png" alt="" />
                  </a>
                </div>
              </div>
              <!-- start logo area -->
              <!-- main menu area start -->
              <div class="col-lg-6 position-static">
                <div class="main-menu-area">
                  <div class="main-menu">
                    <!-- main menu navbar start -->
                    <nav class="desktop-menu">
                      <ul>
                        <li class="active">
                          <a href="/html/common/homepage.html"> Home </a>
                        </li>
                        <li class="static">
                          <a href="#">pages </a>
                          <ul class="megamenu dropdown">
                            <li class="mega-title">
                              <a href="/html/common/shop.html">Shop</a>
                            </li>
                            <li class="mega-title">
                              <a href="#">column 02</a>
                              <ul>
                                <li>
                                  <a href="/html/product-details.html"
                                    >product details</a
                                  >
                                </li>
                                <li>
                                  <a href="/html/product-details-affiliate.html"
                                    >product details affiliate</a
                                  >
                                </li>
                                <li>
                                  <a href="/html/product-details-variable.html"
                                    >product details variable</a
                                  >
                                </li>
                                <li>
                                  <a href="/html/product-details-group.html"
                                    >product details group</a
                                  >
                                </li>
                              </ul>
                            </li>
                            <li class="mega-title">
                              <a href="#">column 03</a>
                              <ul>
                                <li><a href="/html/cart.html">cart</a></li>
                                <li>
                                  <a href="/html/checkout.html">checkout</a>
                                </li>
                                <li>
                                  <a href="/html/compare.html">compare</a>
                                </li>
                                <li>
                                  <a href="/html/wishlist.html">wishlist</a>
                                </li>
                              </ul>
                            </li>
                            <li class="mega-title">
                              <a href="#">column 04</a>
                              <ul>
                                <li>
                                  <a href="/html/common/contact-us.html"
                                    >contact us</a
                                  >
                                </li>
                                <li><a href="/html/faq.html">faq's</a></li>
                              </ul>
                            </li>
                            <li class="megamenu-banners d-none d-lg-block">
                              <a href="/html/product-details.html">
                                <img
                                  src="/images/banner/img-bottom-menu.jpg"
                                  alt=""
                                />
                              </a>
                            </li>
                          </ul>
                        </li>
                        <li>
                          <a href="/html/common/shop.html"> shop </a>
                        </li>
                        <li>
                          <a href="/html/blog-left-sidebar.html"> Blog </a>
                          <ul class="dropdown">
                            <li>
                              <a href="/html/blog-left-sidebar.html"
                                >blog left sidebar</a
                              >
                            </li>
                            <li>
                              <a href="/html/blog-right-sidebar.html"
                                >blog right sidebar</a
                              >
                            </li>
                            <li>
                              <a href="/html/blog-grid-full-width.html"
                                >blog grid no sidebar</a
                              >
                            </li>
                            <li>
                              <a href="/html/blog-details.html">blog details</a>
                            </li>
                            <li>
                              <a href="/html/blog-details-left-sidebar.html"
                                >blog details left sidebar</a
                              >
                            </li>
                          </ul>
                        </li>
                        <li>
                          <a href="/html/common/contact-us.html">Contact us</a>
                        </li>
                      </ul>
                    </nav>
                    <!-- main menu navbar end -->
                  </div>
                </div>
              </div>
              <!-- main menu area end -->
              <!-- mini cart area start -->
              <div class="col-lg-3">
                <div class="header-configure-wrapper">
                  <div class="header-configure-area">
                    <ul class="nav justify-content-end">
                      <li>
                        <a href="#" class="offcanvas-btn">
                          <i class="lnr lnr-magnifier"></i>
                        </a>
                      </li>
                      <!-- User Authentication Section -->
                      <li class="user-hover" id="user-menu">
                        <a href="javascript:void(0);">
                          <i class="lnr lnr-user"></i>
                        </a>
                        <ul class="dropdown-list" id="user-dropdown">
                          <!-- This will be populated by JavaScript based on auth state -->
                        </ul>
                      </li>
                      <li>
                        <a href="/html/wishlist.html">
                          <i class="lnr lnr-heart"></i>
                          <div class="notification">0</div>
                        </a>
                      </li>
                      <li>
                        <a href="#" class="minicart-btn">
                          <i class="lnr lnr-cart"></i>
                          <div class="notification">0</div>
                        </a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
              <!-- mini cart area end -->
            </div>
          </div>
        </div>
        <!-- header middle area end -->
      </div>
      <!-- main header start -->
      <!-- mobile header start -->
      <div class="mobile-header d-lg-none d-md-block sticky">
        <!--mobile header top start -->
        <div class="container">
          <div class="row align-items-center">
            <div class="col-12">
              <div class="mobile-main-header">
                <div class="mobile-logo">
                  <a href="/html/common/homepage.html">
                    <img src="/images/logo/logo.png" alt="Brand Logo" />
                  </a>
                </div>
                <div class="mobile-menu-toggler">
                  <div class="mini-cart-wrap">
                    <a href="/html/cart.html">
                      <i class="lnr lnr-cart"></i>
                    </a>
                  </div>
                  <div class="mobile-menu-btn">
                    <div class="off-canvas-btn">
                      <i class="lnr lnr-menu"></i>
            <div class="off-canvas-inner">
                <!-- search box start -->
                <div class="search-box-offcanvas">
                    <form>
                        <input type="text" placeholder="Search Here..." />
                        <button class="search-btn">
                            <i class="lnr lnr-magnifier"></i>
                        </button>
                    </form>
                </div>
                <!-- search box end -->
                <!-- mobile menu start -->
                <div class="mobile-navigation">
                    <!-- mobile menu navigation start -->
                    <nav>
                        <ul class="mobile-menu">
                            <li class="menu-item-has-children">
                                <a href="index.html">Home</a>
                                <ul class="dropdown">
                                    <li><a href="index.html">Home version 01</a></li>
                                    <li><a href="index-2.html">Home version 02</a></li>
                                    <li><a href="index-3.html">Home version 03</a></li>
                                    <li><a href="index-4.html">Home version 04</a></li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children">
                                <a href="#">pages</a>
                                <ul class="megamenu dropdown">
                                    <li class="mega-title menu-item-has-children">
                                        <a href="#">column 01</a>
                                        <ul class="dropdown">
                                            <li>
                                                <a href="shop.html"> shop grid left sidebar </a>
                                            </li>
                                            <li>
                                                <a href="shop-grid-right-sidebar.html">
                                                    shop grid right sidebar
                                                </a>
                                            </li>
                                            <li>
                                                <a href="shop-list-left-sidebar.html">shop list left sidebar</a>
                                            </li>
                                            <li>
                                                <a href="shop-list-right-sidebar.html">shop list right sidebar</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li class="mega-title menu-item-has-children">
                                        <a href="#">column 02</a>
                                        <ul class="dropdown">
                                            <li>
                                                <a href="product-details.html">product details</a>
                                            </li>
                                            <li>
                                                <a href="product-details-affiliate.html">
                                                    product details affiliate
                                                </a>
                                            </li>
                                            <li>
                                                <a href="product-details-variable.html">
                                                    product details variable
                                                </a>
                                            </li>
                                            <li>
                                                <a href="product-details-group.html">
                                                    product details group
                                                </a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li class="mega-title menu-item-has-children">
                                        <a href="#">column 03</a>
                                        <ul class="dropdown">
                                            <li><a href="cart.html">cart</a></li>
                                            <li><a href="checkout.html">checkout</a></li>
                                            <li><a href="compare.html">compare</a></li>
                                            <li><a href="wishlist.html">wishlist</a></li>
                                        </ul>
                                    </li>
                                    <li class="mega-title menu-item-has-children">
                                        <a href="#">column 04</a>
                                        <ul class="dropdown">
                                            <li><a href="my-account.html">my-account</a></li>
                                            <li>
                                                <a href="login-register.html">login-register</a>
                                            </li>
                                            <li><a href="contact-us.html">contact us</a></li>
                                            <li><a href="faq.html">faq's</a></li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children">
                                <a href="/html/common/shop.html">shop</a>
                                <ul class="dropdown">
                                    <li class="menu-item-has-children">
                                        <a href="#">shop grid layout</a>
                                        <ul class="dropdown">
                                            <li><a href="shop.html">shop grid left sidebar</a></li>
                                            <li>
                                                <a href="shop-grid-right-sidebar.html">shop grid right sidebar</a>
                                            </li>
                                            <li>
                                                <a href="shop-grid-full-3-col.html">shop grid full 3 col</a>
                                            </li>
                                            <li>
                                                <a href="shop-grid-full-4-col.html">shop grid full 4 col</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li class="menu-item-has-children">
                                        <a href="/html/common/shop.html">shop list layout</a>
                                        <ul class="dropdown">
                                            <li>
                                                <a href="shop-list-left-sidebar.html">shop list left sidebar</a>
                                            </li>
                                            <li>
                                                <a href="shop-list-right-sidebar.html">shop list right sidebar</a>
                                            </li>
                                            <li>
                                                <a href="shop-list-full-width.html">shop list full width</a>
                                            </li>
                                        </ul>
                                    </li>
                                    <li class="menu-item-has-children">
                                        <a href="#">products details</a>
                                        <ul class="dropdown">
                                            <li>
                                                <a href="product-details.html">product details</a>
                                            </li>
                                            <li>
                                                <a href="product-details-affiliate.html">product details affiliate</a>
                                            </li>
                                            <li>
                                                <a href="product-details-variable.html">product details variable</a>
                                            </li>
                                            <li>
                                                <a href="product-details-group.html">product details group</a>
                                            </li>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li class="menu-item-has-children">
                                <a href="#">Blog</a>
                                <ul class="dropdown">
                                    <li>
                                        <a href="blog-left-sidebar.html">blog left sidebar</a>
                                    </li>
                                    <li>
                                        <a href="blog-right-sidebar.html">blog right sidebar</a>
                                    </li>
                                    <li>
                                        <a href="blog-grid-full-width.html">blog grid no sidebar</a>
                                    </li>
                                    <li><a href="blog-details.html">blog details</a></li>
                                    <li>
                                        <a href="blog-details-left-sidebar.html">blog details left sidebar</a>
                                    </li>
                                </ul>
                            </li>
                            <li><a href="contact-us.html">Contact us</a></li>
                        </ul>
                    </nav>
                    <!-- mobile menu navigation end -->
                </div>
                <!-- mobile menu end -->
                                        <a href="blog-left-sidebar.html">blog left sidebar</a>
          <div class="mobile-settings">
            <ul class="nav">
              <li>
                <div class="dropdown mobile-top-dropdown">
                  <a
                    href="#"
                    class="dropdown-toggle"
                    id="currency"
                    data-bs-toggle="dropdown"
                    aria-haspopup="true"
                    aria-expanded="false"
                  >
                    Currency
                    <i class="fa fa-angle-down"></i>
                  </a>
                  <div class="dropdown-menu" aria-labelledby="currency">
                    <a class="dropdown-item" href="#">$ USD</a>
                    <a class="dropdown-item" href="#">$ EURO</a>
                  </div>
                </div>
              </li>
              <li>
                <div class="dropdown mobile-top-dropdown">
                  <a
                    href="#"
                    class="dropdown-toggle"
                    id="myaccount"
                    data-bs-toggle="dropdown"
                    aria-haspopup="true"
                    aria-expanded="false"
                  >
                    My Account
                    <i class="fa fa-angle-down"></i>
                  </a>
                  <div class="dropdown-menu" aria-labelledby="myaccount">
                    <a class="dropdown-item" href="my-account.html"
                      >my account</a
                    >
                    <a class="dropdown-item" href="login-register.html">
                      login</a
                    >
                    <a class="dropdown-item" href="login-register.html"
                      >register</a
                    >
                  </div>
                </div>
              </li>
            </ul>
          </div>
                    aria-expanded="false"
                  >
                    My Account
                    <i class="fa fa-angle-down"></i>
                  </a>
                  <div class="dropdown-menu" aria-labelledby="myaccount">
                    <a class="dropdown-item" href="my-account.html"
                      >my account</a
                    >
                    <a class="dropdown-item" href="login-register.html">
                      login</a
                    >
                    <a class="dropdown-item" href="login-register.html"
                      >register</a
                    >
                  </div>
                </div>
              </li>
            </ul>
          </div>

                <!-- offcanvas widget area start -->
                <div class="offcanvas-widget-area">
                    <div class="off-canvas-contact-widget">
                        <ul>
                            <li>
                                <i class="fa fa-mobile"></i>
                                <a href="#">0123456789</a>
                            </li>
                            <li>
        <!-- breadcrumb area start -->
        <div class="breadcrumb-area common-bg">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="breadcrumb-wrap">
                            <nav aria-label="breadcrumb">
                                <h1>shop</h1>
                                <ul class="breadcrumb">
                                    <li class="breadcrumb-item"><a href="index.html"><i class="fa fa-home"></i></a></li>
                                    <li class="breadcrumb-item active" aria-current="page">shop</li>
                                </ul>
                            </nav>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- breadcrumb area end -->
        <!-- page main wrapper start -->
        <div class="shop-main-wrapper section-space pb-0">
            <div class="container" id="featured-products-container">
                <div class="row">
                    <!-- sidebar area start -->
                    <div class="col-lg-3 order-2 order-lg-1">
                        <aside class="sidebar-wrapper">
                            <!-- single sidebar start -->
                            <div class="sidebar-single">
                                <h3 class="sidebar-title">categories</h3>
                                <div class="sidebar-body">
                                    <ul class="shop-categories">
                                    </ul>
                                </div>
                            </div>
                            <!--single sidebar end-->
                            <!--single sidebar start-->
                            <!--<div class="sidebar-single">
                            <h3 class="sidebar-title">price</h3>
                            <div class="sidebar-body">
                                <div class="price-range-wrap">-->
                            <!--SET RANGE TỪ DATABASE HOẶC DEFAULT-->
                            <!--<div class="price-range price-range-slider"
                                             data-min="0"
                                             data-max="650000"
                                             data-default-min="50000"
                                             data-default-max="500000">
                                        </div>
                                        <div class="range-slider">
                                            <form action="#" class="d-flex align-items-center justify-content-between">
                                                <div class="price-input">
                                                    <label for="amount"></label>
                                                    <input type="text" id="amount" readonly>
                                                </div>
                                                <button type="button" class="filter-btn">filter</button>
                                            </form>
                                        </div>
                                    </div>
                                </div>
                            </div>-->
                            <!-- single sidebar start -->
                            <div class="sidebar-banner">
                                <div class="img-container">
                                    <a href="#">
                                        <img src="../../img/banner/sidebar-banner.jpg" alt="">
                                    </a>
                                </div>
                            </div>
                            <!-- single sidebar end -->
                        </aside>
                    </div>
                    <!-- sidebar area end -->
                    <!-- shop main wrapper start -->
                    <div class="col-lg-9 order-1 order-lg-2">
                        <div class="shop-product-wrapper">
                            <!-- shop product top wrap start -->
                            <div class="shop-top-bar">
                                <div class="row align-items-center">
                                    <input type="text" id="searchInput" placeholder="Tìm sản phẩm..."
                                           class="form-control mb-2" style="width:100%;">

                                    <div class="col-lg-7 col-md-6 order-2 order-md-1">
                                        <div class="top-bar-left">
                                            <div class="product-view-mode">
                                                <a class="active" href="#" data-target="grid-view" data-bs-toggle="tooltip" title="Grid View"><i class="fa fa-th"></i></a>
                                            </div>
                                            <div class="product-amount">
                                                <p>Showing 1–5 of 8 results</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-5 col-md-6 order-1 order-md-2">
                                        <div class="top-bar-right">
                                            <select name="sortBy">
                                                <option value="default">Default</option>
                                                <option value="name,asc">Name (A-Z)</option>
                                                <option value="name,desc">Name (Z-A)</option>
                                                <option value="price,asc">Price (Low to High)</option>
                                                <option value="price,desc">Price (High to Low)</option>
                                            </select>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- shop product top wrap start -->
                            <!-- product item list wrapper start -->
                            <div class="shop-product-wrap grid-view row mbn-40 shop-container">
                                <!--product-->
                            </div>
                            <!-- product item list wrapper end -->
                            <!-- start pagination area -->
                            <div class="paginatoin-area text-center">
                                <ul class="pagination-box">
                                    <li><a class="previous" href="#"><i class="lnr lnr-chevron-left"></i></a></li>
                                    <li class="active"><a href="#">1</a></li>
                                    <li><a href="#">2</a></li>
                                    <li><a href="#">3</a></li>
                                    <li><a class="next" href="#"><i class="lnr lnr-chevron-right"></i></a></li>
                                </ul>
                            </div>
                            <!-- end pagination area -->
                        </div>
                    </div>
                    <!-- shop main wrapper end -->
                </div>
            </div>
        </div>
        <!-- page main wrapper end -->
                            </div>
    <!-- Load Footer Component -->
    <div
      hx-get="../components/footer.html"
      hx-trigger="load"
      hx-swap="outerHTML"
    ></div>
    <!-- main wrapper end -->
                  </div>
                  <button class="minicart-remove">
                    <i class="lnr lnr-cross"></i>
                  </button>
                </li>
              </ul>
            </div>

            <div class="minicart-pricing-box">
              <ul>
                <li>
                  <span>sub-total</span>
                  <span><strong>$300.00</strong></span>
                </li>
                <li>
                  <span>Eco Tax (-2.00)</span>
                  <span><strong>$10.00</strong></span>
                </li>
                <li>
        const API_BASE = "https://localhost:7062/api";

        function formatPrice(price) {
            return price
                ? new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(price)
                : "Liên hệ";
        }

        function productImage(id) {
            return `${API_BASE.replace('/api', '')}/Image/products/${id}/primary.jpg`;
        }

        document.addEventListener("DOMContentLoaded", () => {
            const container = document.querySelector(".shop-product-wrap");
            const pagination = document.querySelector(".pagination-box");
            const categories = document.querySelector(".shop-categories");
            const productInfo = document.querySelector(".product-amount p");
            const niceSelect = document.querySelector(".nice-select");
            const searchInput = document.getElementById("searchInput");

            // Kiểm tra niceSelect có được tìm thấy không
            if (!niceSelect) {
                console.error("Không tìm thấy div.nice-select! Vui lòng kiểm tra HTML và đảm bảo Nice Select được khởi tạo đúng.");
                container.innerHTML = "<p class='text-danger'>Lỗi: Không tìm thấy bộ chọn sắp xếp!</p>";
                return;
            }
            console.log("Đã tìm thấy niceSelect:", niceSelect);

            let state = {
                page: 1,
                size: 6,
                total: 0,
                pages: 0,
                category: "",
                sortBy: "id", // Mặc định sắp xếp theo ID
                asc: true, // Mặc định tăng dần
                search: ""
            };

            // Tải danh mục sản phẩm
            async function loadCategories() {
                try {
                    let res = await fetch(`${API_BASE}/ProductCategory/with-products`);
                    let { data, succeeded } = await res.json();
                    if (!succeeded) {
                        console.error("Lỗi tải danh mục:", data);
                        categories.innerHTML = "<li><p class='text-danger'>Lỗi tải danh mục!</p></li>";
                        return;
                    }
                    categories.innerHTML = `<li><a href="#" data-id="">Tất cả</a></li>` +
                        data.map(c => `<li><a href="#" data-id="${c.id}">${c.name} <span>${c.totalProducts || 0}</span></a></li>`).join("");
                } catch (error) {
                    console.error("Lỗi tải danh mục:", error);
                    categories.innerHTML = "<li><p class='text-danger'>Lỗi tải danh mục!</p></li>";
                }
            }

            // Tải sản phẩm
            async function loadProducts() {
                container.innerHTML = `<div class="col-12 text-center p-5"><i class="fa fa-spinner fa-spin"></i> Đang tải...</div>`;
                let url = `${API_BASE}/Product?pageNumber=${state.page}&pageSize=${state.size}`;
                if (state.category) url += `&categoryId=${state.category}`;
                url += `&sortBy=${state.sortBy}&asc=${state.asc}`;
                if (state.search) url += `&search=${encodeURIComponent(state.search)}`;

                try {
                    let res = await fetch(url);
                    let { data, succeeded } = await res.json();
                    console.log("Phản hồi API:", data); // Debug
                    if (!succeeded) {
                        container.innerHTML = "<p class='text-danger'>Lỗi tải sản phẩm!</p>";
                        return;
                    }

                    let items = data.items || data;
                    state.pages = data.totalPages || Math.ceil((data.totalCount || 0) / state.size);
                    state.total = data.totalCount || items.length;

                    // Hiển thị sản phẩm
                    container.innerHTML = items.map(p => `
                    <div class="col-md-4 col-sm-6">
                        <div class="product-item">
                            <figure class="product-thumb">
                                <a href="product-details.html?id=${p.id}">
                                    <img class="pri-img" style="width:100%;height:250px;object-fit:cover"
                                        src="${productImage(p.id)}" onerror="this.src='assets/img/product/default-product.jpg'">
                                </a>
                            </figure>
                            <div class="product-caption">
                                <p class="product-name"><a href="product-details.html?id=${p.id}">${p.name}</a></p>
                                <div class="price-box"><span class="price-regular">${formatPrice(p.price)}</span></div>
                            </div>
                        </div>
                    </div>`).join("");

                    // Hiển thị phân trang
                    if (state.pages > 1) {
                        let html = "";
                        if (state.page > 1) html += `<li><a href="#" data-page="${state.page - 1}"><i class="lnr lnr-chevron-left"></i></a></li>`;
                        for (let i = 1; i <= state.pages; i++) {
                            html += `<li class="${i === state.page ? 'active' : ''}"><a href="#" data-page="${i}">${i}</a></li>`;
                        }
                        if (state.page < state.pages) html += `<li><a href="#" data-page="${state.page + 1}"><i class="lnr lnr-chevron-right"></i></a></li>`;
                        pagination.innerHTML = html;
                    } else {
                        pagination.innerHTML = "";
                    }

                    // Cập nhật thông tin số lượng sản phẩm
                    if (productInfo) {
                        let start = (state.page - 1) * state.size + 1;
                        let end = Math.min(state.page * state.size, state.total);
                        productInfo.textContent = `Hiển thị ${start}–${end} trong số ${state.total} kết quả`;
                    }
                } catch (error) {
                    console.error("Lỗi tải sản phẩm:", error);
                    container.innerHTML = "<p class='text-danger'>Lỗi tải sản phẩm!</p>";
                }
            }

            // Xử lý sự kiện chọn danh mục
            categories.addEventListener("click", e => {
                let link = e.target.closest("a[data-id]");
                if (!link) return;
                e.preventDefault();
                state.category = link.dataset.id;
                state.page = 1;
                loadProducts();
            });

            // Xử lý sự kiện phân trang
            pagination.addEventListener("click", e => {
                let btn = e.target.closest("a[data-page]");
                if (!btn) return;
                e.preventDefault();
                state.page = parseInt(btn.dataset.page);
                loadProducts();
            });
      document.querySelectorAll(".single-check").forEach((checkbox) => {
        checkbox.addEventListener("change", function () {
          if (this.checked) {
            document.querySelectorAll(".single-check").forEach((cb) => {
              if (cb !== this) cb.checked = false;
            });
          }
        });
      });
    </script>
            <div class="minicart-button">
            // Xử lý sự kiện sắp xếp trên nice-select
            niceSelect.addEventListener("click", e => {
                const selectedOption = e.target.closest(".option");
                if (!selectedOption) return;
                const value = selectedOption.getAttribute("data-value");
                console.log("Sự kiện click trên nice-select, giá trị:", value); // Debug
                const [sortBy, asc] = value.split(",");
                state.sortBy = sortBy || "id"; // Fallback nếu sortBy rỗng
                state.asc = asc === "true"; // Chuyển đổi thành boolean
                console.log("Cập nhật state:", { sortBy: state.sortBy, asc: state.asc }); // Debug
                state.page = 1;
                loadProducts();
            });

            // Xử lý tìm kiếm với debounce
            let searchTimeout;
            searchInput.addEventListener("input", e => {
                clearTimeout(searchTimeout);
                searchTimeout = setTimeout(() => {
                    state.search = e.target.value.trim();
                    state.page = 1;
                    loadProducts();
                }, 500); // Chờ 0.5s sau khi ngừng gõ
            });

            // Khởi tạo
            loadCategories();
            loadProducts();
        });
    </script>
    <script src="../../js/vendor.js"></script>
    <!-- Active Js -->
    <script src="../../js/active.js"></script>
          </div>
    <!-- Import required services and components -->
    <script type="module" src="../../js/services/ApiService.js"></script>
    <script type="module" src="../../js/component/cart/CartManager.js"></script>
    <script
      type="module"
      src="../../js/component/header/HeaderManager.js"
    ></script>

    <script src="../../js/shop.js"></script>

    <script src="https://unpkg.com/htmx.org@1.9.12"></script>
  </body>
                  <button class="minicart-remove">
                    <i class="lnr lnr-cross"></i>
                  </button>
                </li>
              </ul>
            </div>

            <div class="minicart-pricing-box">
              <ul>
                <li>
                  <span>sub-total</span>
                  <span><strong>$300.00</strong></span>
                </li>
                <li>
                  <span>Eco Tax (-2.00)</span>
                  <span><strong>$10.00</strong></span>
                </li>
                <li>
                  <span>VAT (20%)</span>
                  <span><strong>$60.00</strong></span>
                </li>
                <li class="total">
                  <span>total</span>
                  <span><strong>$370.00</strong></span>
                </li>
              </ul>
            </div>

            <div class="minicart-button">
              <a href="cart.html"
                ><i class="fa fa-shopping-cart"></i> view cart</a
              >
              <a href="cart.html"><i class="fa fa-share"></i> checkout</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- offcanvas mini cart end -->
                  <span><strong>$60.00</strong></span>
                </li>
                <li class="total">
                  <span>total</span>
                  <span><strong>$370.00</strong></span>
                </li>
              </ul>
            </div>

            <div class="minicart-button">
              <a href="cart.html"
                ><i class="fa fa-shopping-cart"></i> view cart</a
              >
              <a href="cart.html"><i class="fa fa-share"></i> checkout</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- offcanvas mini cart end -->
    <!-- Scroll to top start -->
    <div class="scroll-top not-visible">
        <i class="fa fa-angle-up"></i>
    </div>










    <script src="../../js/vendor.js"></script>
    <!-- Active Js -->
    <script src="../../js/active.js"></script>

    <script>
        document.querySelectorAll('.single-check').forEach(checkbox => {
            checkbox.addEventListener('change', function () {
                if (this.checked) {
                    document.querySelectorAll('.single-check').forEach(cb => {
                        if (cb !== this) cb.checked = false;
                    });
                }
            });
        });
    </script>



    <script src="../../js/vendor.js"></script>
    <!-- Active Js -->
    <script src="../../js/active.js"></script>

    <!--<script type="module" src="../../js/component/AutoProductInitializer.js"></script>-->
    <script src="../../js/shop.js"></script>
</body>

  <!-- Mirrored from htmldemo.net/floda/floda/shop.html by HTTrack Website Copier/3.x [XR&CO'2014], Wed, 13 Aug 2025 01:29:25 GMT -->
</html>
